{
  "model_name": "hybrid_vit_cascade_runpod",
  "description": "Dual-view (frontal + lateral) X-ray DRR to CT generation for RunPod training",
  
  "xray_config": {
    "img_size": 512,
    "num_views": 2,
    "share_view_weights": false,
    "view_types": ["frontal", "lateral"]
  },
  
  "stage_configs": [
    {
      "name": "stage1",
      "volume_size": [64, 64, 64],
      "voxel_dim": 256,
      "vit_depth": 4,
      "num_heads": 4,
      "use_depth_lifting": true,
      "use_physics_loss": false,
      "physics_weight": 0.0
    },
    {
      "name": "stage2",
      "volume_size": [128, 128, 128],
      "voxel_dim": 384,
      "vit_depth": 6,
      "num_heads": 6,
      "use_depth_lifting": true,
      "use_physics_loss": false,
      "physics_weight": 0.0
    },
    {
      "name": "stage3",
      "volume_size": [256, 256, 256],
      "voxel_dim": 512,
      "vit_depth": 8,
      "num_heads": 8,
      "use_depth_lifting": true,
      "use_physics_loss": false,
      "physics_weight": 0.0
    },
    {
      "name": "stage4",
      "volume_size": [512, 512, 512],
      "voxel_dim": 768,
      "vit_depth": 10,
      "num_heads": 12,
      "use_depth_lifting": true,
      "use_physics_loss": false,
      "physics_weight": 0.0
    }
  ],
  
  "training": {
    "num_timesteps": 1000,
    "v_parameterization": true,
    "batch_size": 32,
    "batch_size_stage2": 16,
    "batch_size_stage3": 8,
    "batch_size_stage4": 1,
    "learning_rate": 5e-6,
    "num_epochs_per_stage": 30,
    "gradient_clip": 1.0,
    "ema_decay": 0.9999,
    "num_workers": 4,
    "weight_decay": 0.01,
    "mixed_precision": true,
    "gradient_accumulation_steps": 4
  },
  
  "data": {
    "dataset_path": "/workspace/drr_patient_data",
    "max_patients": 1000,
    "train_split": 0.8,
    "val_split": 0.1,
    "test_split": 0.1,
    "normalize_range": [-1, 1],
    "validate_alignment": false,
    "augmentation": true,
    "cache_in_memory": false,
    "flip_drrs_vertical": true,
    "target_xray_size": 512,
    "target_volume_size": [256, 256, 256]
  },
  
  "checkpointing": {
    "checkpoint_dir": "/workspace/checkpoints/hybrid_vit_cascade",
    "save_every_n_epochs": 5,
    "keep_last_n_checkpoints": 3
  },
  
  "logging": {
    "wandb": {
      "enabled": true,
      "project": "xray2ct-hybrid-vit",
      "entity": null,
      "run_name": null
    },
    "log_every_n_steps": 50,
    "validate_every_n_epochs": 1
  }
}
